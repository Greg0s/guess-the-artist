(function(){"use strict";var t={9164:function(t,e,r){var s=r(9242),i=r(3396);const n=(0,i._)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),a=(0,i._)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),o=(0,i._)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Judson:ital,wght@0,400;0,700;1,400&display=swap",rel:"stylesheet"},null,-1),c=(0,i._)("h1",{class:"title"},"GuessTheArtist",-1);function l(t,e,r,s,l,u){const h=(0,i.up)("QuizFilters"),p=(0,i.up)("QuizScore"),d=(0,i.up)("QuizCover"),m=(0,i.up)("QuizAnswerField");return(0,i.wg)(),(0,i.iD)(i.HY,null,[n,a,o,c,(0,i.Wm)(h,{onCheckedGenre:u.setGenreFilter},null,8,["onCheckedGenre"]),(0,i.Wm)(p,{gameScore:l.score,total:l.attemptsNb,gameSR:l.successRate},null,8,["gameScore","total","gameSR"]),(0,i.Wm)(d,{imgSource:l.artistPic},null,8,["imgSource"]),(0,i.Wm)(m,{onAttempt:u.checkAnswer,onSkip:u.skipArtist},null,8,["onAttempt","onSkip"])],64)}const u={class:"filters-container"},h={class:"filters decade"},p=(0,i._)("span",{class:"label"},"Genre: ",-1),d=(0,i._)("label",{for:"all"},"All",-1),m=(0,i._)("label",{for:"pop"},"Pop",-1),g=(0,i._)("label",{for:"rock"},"Rock",-1),f=(0,i._)("label",{for:"rap"},"Rap",-1),w=(0,i._)("label",{for:"edm"},"EDM",-1);function k(t,e,r,n,a,o){return(0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",h,[p,d,(0,i.wy)((0,i._)("input",{type:"radio",id:"all",value:"all",onChange:e[0]||(e[0]=(...t)=>o.check&&o.check(...t)),"onUpdate:modelValue":e[1]||(e[1]=t=>a.checkedGenre=t)},null,544),[[s.G2,a.checkedGenre]]),m,(0,i.wy)((0,i._)("input",{type:"radio",id:"pop",value:"pop",onChange:e[2]||(e[2]=(...t)=>o.check&&o.check(...t)),"onUpdate:modelValue":e[3]||(e[3]=t=>a.checkedGenre=t)},null,544),[[s.G2,a.checkedGenre]]),g,(0,i.wy)((0,i._)("input",{type:"radio",id:"rock",value:"rock",onChange:e[4]||(e[4]=(...t)=>o.check&&o.check(...t)),"onUpdate:modelValue":e[5]||(e[5]=t=>a.checkedGenre=t)},null,544),[[s.G2,a.checkedGenre]]),f,(0,i.wy)((0,i._)("input",{type:"radio",id:"rap",value:"rap",onChange:e[6]||(e[6]=(...t)=>o.check&&o.check(...t)),"onUpdate:modelValue":e[7]||(e[7]=t=>a.checkedGenre=t)},null,544),[[s.G2,a.checkedGenre]]),w,(0,i.wy)((0,i._)("input",{type:"radio",id:"edm",value:"edm",onChange:e[8]||(e[8]=(...t)=>o.check&&o.check(...t)),"onUpdate:modelValue":e[9]||(e[9]=t=>a.checkedGenre=t)},null,544),[[s.G2,a.checkedGenre]])])])}var y={name:"QuizFilters",emits:["checkedGenre"],data(){return{checkedGenre:"all"}},async created(){},methods:{check(){console.log(this.checkedGenre),this.$emit("checkedGenre",{message:this.checkedGenre})}}},v=r(89);const A=(0,v.Z)(y,[["render",k]]);var S=A;const G={id:"cover"},b=["src"];function _(t,e,r,s,n,a){return(0,i.wg)(),(0,i.iD)("div",G,[(0,i._)("img",{alt:"Artist picture",src:r.imgSource},null,8,b)])}var z={name:"QuizCover",props:{imgSource:String}};const N=(0,v.Z)(z,[["render",_]]);var C=N;function j(t,e,r,n,a,o){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)((0,i._)("input",{onKeyup:e[0]||(e[0]=(0,s.D2)(((...t)=>o.checkAnswer&&o.checkAnswer(...t)),["enter"])),class:"textField","onUpdate:modelValue":e[1]||(e[1]=t=>a.attempt=t)},null,544),[[s.nr,a.attempt]]),(0,i._)("button",{onClick:e[2]||(e[2]=(...t)=>o.clear&&o.clear(...t))},"Delete"),(0,i._)("button",{onClick:e[3]||(e[3]=(...t)=>o.skip&&o.skip(...t))},"Skip")],64)}var I={name:"QuizAnswerField",emits:["attempt","skip"],data(){return{attempt:""}},methods:{clear(){this.attempt=""},toApp(t){this.$emit("attempt",{message:t}),this.clear()},checkAnswer(){this.toApp(this.attempt)},skip(){this.$emit("skip")}}};const T=(0,v.Z)(I,[["render",j]]);var D=T,O=r(7139);const F={id:"results"},R={id:"score"},Q={id:"success-rate"};function L(t,e,r,s,n,a){return(0,i.wg)(),(0,i.iD)("div",F,[(0,i._)("span",R,"Score: "+(0,O.zw)(r.gameScore)+" / "+(0,O.zw)(r.total),1),(0,i._)("span",Q,"Rate: "+(0,O.zw)(r.gameSR)+"%",1)])}var x={name:"QuizScore",methods:{setCover(){console.log("hello")}},props:{gameScore:Number,gameSR:Number,total:Number}};const U=(0,v.Z)(x,[["render",L]]);var Y=U;const Z="OGZkNDUxYTU4NmIxNDc2ODhkNmNlY2ZlYTllOTQwZDU6YjgzZjk4Y2JkNzVkNGQ2OGFjNTljZmUwYTYwMzcyYmI=";let E="",H={async getAccessToken(){let t=await fetch("https://accounts.spotify.com/api/token?grant_type=client_credentials",{method:"POST",headers:{Authorization:"Basic "+Z,"Content-Type":"application/x-www-form-urlencoded"}});if(!t)throw new Error("Something went wrong!");return t.json()},async getSongs(){""==E&&await P();let t=await fetch("https://api.spotify.com/v1/playlists/1ISSOeZLHpzuOJ0CdSYwgD/tracks",{method:"GET",headers:{Authorization:"Bearer "+E}});if(!t)throw new Error("Something went wrong!");return t.json()},async getArtist(t){""==E&&await P();let e=await fetch("https://api.spotify.com/v1/artists/"+t,{method:"GET",headers:{Authorization:"Bearer "+E}});if(!e)throw new Error("Something went wrong!");return e.json()},async getTopSongsArtist(t){""==E&&await P();let e=await fetch("https://api.spotify.com/v1/artists/"+t+"/top-tracks?market=US",{method:"GET",headers:{Authorization:"Bearer "+E}});if(!e)throw new Error("Something went wrong!");return e.json()}};async function P(){E=await H.getAccessToken(),E=E.access_token}setInterval(P(),36e5);var V=H,M={name:"App",components:{QuizFilters:S,QuizCover:C,QuizAnswerField:D,QuizScore:Y},async created(){this.artistsHistory="",console.log(this.artistsHistory),await this.play()},data(){return{artistId:"",artist:"",artistPic:"",artistName:"",artistGenres:"",score:0,successRate:0,attemptsNb:0,tracksList:"",genre:"all",artistsHistory:""}},methods:{async getDataset(){const t=await V.getSongs();return t.items},async getArtistDecades(t){let e,r=await V.getTopSongsArtist(t),s="",i="1980-01-01",n="1990-01-01",a="2000-01-01",o="2010-01-01",c="2020-01-01";return r.tracks.forEach((t=>{e=t.album.release_date,s+=e<i?"b1980 ":e<n?"1980 ":e<a?"1990 ":e<o?"2000 ":e<c?"2010 ":"2020"})),s},getRandomInList(t){let e=Math.floor(50*Math.random());return t[e]},async getInListFilters(t,e){let r=this.getRandomInList(t).track,s=await this.getArtistFromId(r.artists[0].id);return"all"==e||s.genres.join().toLowerCase().includes(e)?this.artistsHistory.includes(r.artists[0].id)?(console.log("artiste deja passÃ©"),"exit"):(this.artistsHistory+=r.artists[0].id+" ",console.log(this.artistsHistory),r.artists[0].id):"exit"},async getArtistId(){await this.getTracksList();let t=0;do{this.artistId=await this.getInListFilters(this.tracksList,this.genre),t++}while("exit"==this.artistId&&t<50);50==t&&(t=0,alert("No more artists to guess"),this.artistsHistory="")},async getTracksList(){this.tracksList=await this.getDataset()},async getArtistInfos(){this.artist=await V.getArtist(this.artistId),this.artistPic=this.artist.images[0].url,this.artistName=this.artist.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),this.artistGenres=this.artist.genres.join()},async getArtistFromId(t){return this.artist=await V.getArtist(t)},checkAnswer(t){this.attemptsNb++;let e=t.message.normalize("NFD").replace(/[\u0300-\u036f]/g,"");this.artistName.toLowerCase()==e&&(this.play(),this.score++),this.updateSR()},skipArtist(){this.attemptsNb++,this.play(),this.updateSR()},updateSR(){this.attemptsNb>0&&(this.successRate=Math.floor(100*this.score/this.attemptsNb))},setGenreFilter(t){this.genre=t.message,console.log(this.genre)},async play(){await this.getArtistId(),await this.getArtistInfos(),console.log(this.artistGenres),console.log(this.artistName)}}};const B=(0,v.Z)(M,[["render",l]]);var W=B;(0,s.ri)(W).mount("#app")}},e={};function r(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,r),n.exports}r.m=t,function(){var t=[];r.O=function(e,s,i,n){if(!s){var a=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],n=t[u][2];for(var o=!0,c=0;c<s.length;c++)(!1&n||a>=n)&&Object.keys(r.O).every((function(t){return r.O[t](s[c])}))?s.splice(c--,1):(o=!1,n<a&&(a=n));if(o){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[s,i,n]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,n,a=s[0],o=s[1],c=s[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(c)var u=c(r)}for(e&&e(s);l<a.length;l++)n=a[l],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(u)},s=self["webpackChunkimac_progwebvuejs"]=self["webpackChunkimac_progwebvuejs"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(9164)}));s=r.O(s)})();
//# sourceMappingURL=app.6f54edc2.js.map